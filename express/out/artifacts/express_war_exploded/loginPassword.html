<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title>快件e栈用户登陆</title>
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no" name="format-detection">
    <link href="css/style.css" rel="stylesheet" type="text/css">
</head>
<body style="">
<section class="aui-flexView">
    <header class="aui-navBar aui-navBar-fixed">
        <a href="javascript:" class="aui-navBar-item">

        </a>
        <div class="aui-center">
            <span class="aui-center-title"></span>
        </div>
    </header>
    <section class="aui-scrollView">
        <div class="aui-ver-head">
            <img src="images/head.png" alt="">
        </div>
        <div class="aui-ver-form"><img class="logo" src="images/logo.png">
            <div class="aui-flex">
                <div class="aui-flex-box">
                    <i class="icon icon-phone"></i>
                    <input id="phone1" type="text" autocomplete="off" placeholder="手机号码">
                </div>
            </div>
            <div class="aui-flex">
                <div class="aui-flex-box">
                    <i class="icon icon-lock"></i>
                    <input id="password1" type="password" autocomplete="off" placeholder="密码">
                </div>
            </div>
            <div class="aui-ver-button">
                <button onclick="binding()">立即登录</button>
            </div>
            <div class="aui-note" style="text-align:center;color:#888;font-size:12px;margin-top:8px;">
                如需使用验证码登录/注册，<a href="login.html" style="color:#1E9FFF;text-decoration:none;">点此切换</a>
            </div>
            <div class="aui-cell-box">
                <label class="cell-right">
                    <input type="checkbox" value="1" name="checkbox" checked="checked">
                    <i class="cell-checkbox-icon"></i>
                    <em>同意快递e栈注册协议</em>
                </label>
            </div>
        </div>
    </section>
</section>
<script src="js/jquery.min.js"></script>
<script src="/layer/layer.js"></script>
<script type="text/javascript">
    var phoneReg = /(^1[3|4|5|7|8]\d{9}$)|(^09\d{8}$)/;

    function binding(){
        if(!$(":checkbox").prop("checked")){
            layer.msg("未勾选协议,无法登陆");
            return;
        }

        var userPhone = $.trim($('#phone1').val());
        var password = $.trim($('#password1').val());

        // 输入验证
        if (!phoneReg.test(userPhone)) {
            layer.msg("请输入有效的手机号码");
            return;
        }

        //新增密码校验逻辑
        if (!password || password.length === 0) {
            layer.msg("请填写密码");
            return;
        }

        if (password && password.length < 6) {
            layer.msg("请输入至少6位的密码");
            return;
        }

        var windowId = layer.load();
        // 修改为新的登录接口
        $.post("/user/loginPassword.do", {userPhone: userPhone, password: password}, function(data){
            layer.close(windowId);
            if(data.status == 0) {
                // 用户登录成功
                layer.msg(data.result, {icon: 1});
                setTimeout(function(){
                    window.location.href = "index.html";
                }, 1000);
            } else {
                layer.msg(data.result, {icon: 2});
            }
        }).fail(function(){
            layer.close(windowId);
            layer.msg("网络错误，请重试");
        });
    }

    // 回车登录
    $(document).keypress(function(e){
        if(e.which == 13) {
            binding();
        }
    });
</script>

loginCode.html