<!DOCTYPE html>
<html>
<head>
    <title>用户详情 -- 快件e栈服务平台</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <link href="css/normalize.css" type="text/css" rel="stylesheet" />
    <link href="css/common.css" type="text/css" rel="stylesheet" />
    <script src="js/jquery.min.js" type="text/javascript"></script>
    <script src="js/notice.js" type="text/javascript"></script>
    <script src="js/common.js" type="text/javascript"></script>
    <script src="js/regexp.js" type="text/javascript"></script>
    <script src="/layer/layer.js"></script>
    <style type="text/css">
        .userInfoEditCont{
            width: 100%;
        }
        .userInfoEditCont  .userInfoIcon{
            width: 20%;
            margin: 0px auto 10px;
        }

        #userNameDisplay {
            display: block;
            text-align: center;
            margin: 10px auto;
            width: 100%;
        }


        .aui-ver-button button {
            background: linear-gradient(to right, #586fe4, #676cea);
            background-color: #fe5455;
            border-radius: 22px;
            color: #fff;
            border: none;
            width: 90%;
            height: 2.35rem;
            line-height: 2.35rem;
            font-size: 1rem;
            box-shadow: 0 5px 9px #dadefd
        }

        /* -----  cover ----- */
        #coverCont{
            position: absolute;
            top: 0%;
            left: 0%;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            display: none;
        }
        .userTypeCont{
            position: absolute;
            top: 0px;
            left: 0px;
            z-index: 1001;
            width: 80%;
            background: #f4f4f4;
            border: 1px solid #f1f1f1;
            border-radius: 5px;
            padding: 20px 0px 30px;
            display: none;
        }
        .userTypeCont .userTypeTitle{
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            padding: 10px 0px;
        }
        .userTypeCont .userType{
            width: 90%;
            margin: 5px auto;
            overflow: hidden;
        }
        .userTypeCont .userType .teacherType{
            width: 45%;
            padding: 10px 2%;
            float: left;
            border: 1px solid #f1f1f1;
            background: #fff;
        }
        .userTypeCont .userType .studentType{
            width: 45%;
            padding: 10px 2%;
            float: right;
            border: 1px solid #f1f1f1;
            background: #fff;
        }
        .userType .typeImg{
            width: 50%;
            margin: 0px auto 5px;
        }
        .userType .typeTitle{
            text-align: center;
            line-height: 30px;
            font-weight: bold;
            color: #333333;
        }
        .userType .typeDesc{
            font-size: 12px;
            color: #888888;
            line-height: 20px;
            text-align: center;
        }

        .submitBtn{
            width: 90%;
            margin: 0 auto 20px;
            text-align: center;
            line-height: 46px;
            border-radius: 23px;
            background: #888888;
            color: #fff;
            font-weight: bolder;
        }

        .userSelectCont{
            width: 100%;
            background: #fff;
            font-size: 14px;
            overflow: hidden;
            position: fixed;
            left: 0px;
            bottom: 0px;
            display: none;
            z-index: 999;
        }
        .userSelectCont .userSelectTitle{
            width: 90%;
            padding: 0px 5%;
            background: #fff;
            overflow: hidden;
            border-bottom: 1px solid #f1f1f1;
        }
        .userSelectCont .userSelectTitle .selectCancelBtn{
            float: left;
            color: #1f72ff;
            font-weight: bold;
            line-height: 35px;
        }
        .userSelectCont .userSelectTitle .selectOkBtn{
            float: right;
            color: #1f72ff;
            font-weight: bold;
            line-height: 35px;
        }
        .userSelectCont  .selectNumCont{
            width: 90%;
            padding: 0px 5%;
        }
        .userSelectCont  .selectNumCont .selectNum{
            overflow: hidden;
            padding: 10px 0px;
        }
        .userSelectCont  .selectNumCont .selectNum .selectTitle{
            float: left;
            width: 100px;
        }
        .userSelectCont  .selectNumCont .selectNum .selectNumDiv{
            float: left;
            width: calc(100% - 100px);
        }
        .userSelectCont  .selectNumCont .selectNum .selectNumDiv ul{
            list-style: none;
            margin: 0px;
            padding: 0px;
        }
        .userSelectCont  .selectNumCont .selectNum .selectNumDiv ul li{
            float: left;
            width: 24%;
            margin: 0px 0px 5px 1%;
            text-align: center;
            line-height: 25px;
        }

        .selectNum .selectNumDiv ul li.unselect{
            background: #f1f1f1;
            color: #000;
        }
        .selectNum .selectNumDiv ul li.select{
            background: #1f72ff;
            color: #fff;
        }

        .userNewPhoneDiv{
            display: none;
        }

        .gapText{
            text-align: center;
            font-size: 14px;
            color: #888888;
            margin-top: 10px;
        }
    </style>
</head>
<body>
<div class="content">
    <div class="headerNav">
        <div class="headerNavTop"><div class="headerNavIcon headerNavIconOut"><span></span><span></span></div></div>
        <div class="headerNavCont">
            <a href="index.html">快递首页</a>
            <a href="userhome.html">个人中心</a>
            <a href="delivery.html">送货上门</a>
            <a href="sendexpress.html">我要寄件</a>
            <a href="lazyboard.html">懒人排行</a>
            <a href="expassistant.html">快递助手</a>
        </div>
    </div>

    <div class="userInfoEditCont">
        <div class="userInfoIcon">
            <img src="images/userInfoIcon.png" width="100%">
        </div>
        <p id="userNameDisplay">加载中...</p>

        <form>
            <input id="PageContext" type="hidden" value="${pageContext.request.contextPath}" />
            <input id="wxCode" type="hidden" value="${wxCode}" />
            <input type="hidden" id="userId" name="userId" value="${sysWxUser.id}">
            <div class="userInputCont">
                <div class="inputTypeCont phoneRow" id="phoneRow">
                    <div class="inputTitle">手机号</div>
                    <div class="clickRow" id="phoneClick" style="position:relative;">
                        <span id="phoneDisplay" style="display:block;text-align:center;width:87%;margin-top:12px;">加载中...</span>
                        <span class="arrow" style="position:absolute;right:10px;top:60%;transform:translateY(-50%);">&#x276F;</span>
                    </div>
                </div>
                <div class="inputTypeCont">
                    <div class="clickRow" id="passwordClick" style="position:relative;">
                        <span style="display:block;text-align:center;width:100%;margin-top:12px;">修改密码</span>
                        <span class="arrow" style="position:absolute;right:10px;top:60%;transform:translateY(-50%);">&#x276F;</span>
                    </div>
                </div>
            </div>
        </form>

    </div>
</div>

<script type="text/javascript">
    $("#userNameDisplay").css({"cursor":"pointer","text-decoration":"underline","color":"#1f72ff"});

    $("#userNameDisplay").on("click", function(){
        var target = "UserNameModify.html";
        window.location.href = target;
    });

    $("#phoneClick").on("click", function(){
        var target = "UserPhoneModify.html";
        window.location.href = target;
    });

    $("#passwordClick").on("click", function(){
        var target = "UserPasswordModify.html";
        window.location.href = target;
    });

    function maskPhone(phone){
        var s = phone.toString().trim();
        if(/^\d{11}$/.test(s)){
            return s.replace(/^(\d{3})\d{4}(\d{4})$/, "$1****$2");
        }
        return s;
    }

    $(function() {
        loadUserInfo();
    });

    function loadUserInfo() {
        var windowId = layer.load();

        $.ajax({
            url: "/user/checkLogin.do",
            type: "POST",
            dataType: "json",
            success: function(data) {
                layer.close(windowId);

                if(data.status == 0) {
                    // 用户已登录，显示用户名
                    var userName = data.data.userName;
                    var phone = data.data.userPhone;
                    $("#phoneDisplay").text(maskPhone(phone));
                    $("#userNameDisplay").text(userName);
                } else {
                    // 用户未登录，跳转到登录页面
                    layer.msg("请先登录", {icon: 2}, function(){
                        window.location.href = "login.html";
                    });
                }

            },
        });
    }


</script>
</body>
</html>